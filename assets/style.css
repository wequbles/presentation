/* Extracted and improved styles with dark theme, skip-link, progress bar, focus and hover improvements */
:root{
  --bg: #ffffff;
  --page-gradient-top: var(--bg);
  --page-gradient-bottom: #f6fbff;
  --soft: #e9f4fb;
  --muted: #a8c8dc;
  --accent: #2aabee;
  --accent-strong: #0f86c2;
  --glass: rgba(255,255,255,0.7);
  --card-shadow: 0 8px 24px rgba(42,171,238,0.08);
  --radius: 16px;
  --maxw: 1100px;
  --font-sans: "Inter", Roboto, system-ui, -apple-system, "Segoe UI", "Helvetica Neue", Arial;
  --text: #0b2130;
  --muted-text: #507a88;
  --panel-bg: rgba(255,255,255,0.8);
  --panel-strong: #ffffff;
  --hint-bg: #ffffff;
  --hint-shadow: 0 8px 24px rgba(6,60,80,0.08);
  --focus-ring: rgba(42,171,238,0.18);
}
[data-theme="dark"]{
  --bg: #06161b;
  --page-gradient-top: #041218;
  --page-gradient-bottom: #071e26;
  --soft: rgba(20,56,66,0.7);
  --muted: #48869c;
  --accent: #3fc4ff;
  --accent-strong: #60bfff;
  --card-shadow: 0 8px 30px rgba(0,0,0,0.6);
  --radius: 12px;
  --text: #d7eef8;
  --muted-text: #9cc6d6;
  --panel-bg: rgba(6,22,28,0.6);
  --panel-strong: rgba(8,28,36,0.9);
  --hint-bg: #052027;
  --hint-shadow: 0 8px 24px rgba(0,0,0,0.6);
  --focus-ring: rgba(63,196,255,0.18);
}
*{box-sizing:border-box}
html,body{height:100%}
html{scroll-behavior:smooth}
body{margin:0;font-family:var(--font-sans);background:linear-gradient(180deg,var(--page-gradient-top) 0%,var(--page-gradient-bottom) 100%);color:var(--text);display:flex;justify-content:center;padding:40px 12px}
.wrap{width:100%;max-width:var(--maxw)}
header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:56px;height:56px;border-radius:50%;background:var(--soft);display:flex;align-items:center;justify-content:center;box-shadow:var(--card-shadow)}
.logo.big{width:96px;height:96px;border-radius:20px;box-shadow:0 16px 48px rgba(42,171,238,0.12)}
.site-title{font-weight:600;font-size:18px;color:var(--text)}
.site-sub{font-size:12px;color:var(--muted-text)}
.toolbar{margin-left:auto;display:flex;gap:8px;align-items:center}
.theme-toggle{display:inline-flex;align-items:center;gap:8px;padding:8px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted-text);cursor:pointer}
.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;background:var(--accent);color:#04222b;border:none;cursor:pointer;font-weight:600;transition:transform .12s ease,box-shadow .12s ease}
.btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(42,171,238,0.12)}
.btn.ghost[aria-pressed="true"]{background:rgba(42,171,238,0.08)}
.skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip-link:focus{left:12px;top:12px;width:auto;height:auto;padding:8px 12px;border-radius:8px;background:var(--panel-strong);z-index:200}
main{display:block}
section.scene{min-height:72vh;margin:28px 0;padding:28px;border-radius:var(--radius);background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(233,244,251,0.02));box-shadow:0 10px 30px rgba(10,30,50,0.04);position:relative;overflow:hidden}
.lead{color:var(--muted-text);max-width:800px}
.intro{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:18px;padding:60px 18px}
.controls{display:flex;gap:12px;justify-content:center;margin-top:18px}
.mock{display:grid;grid-template-columns:320px 1fr;gap:18px;align-items:start}
.panel{background:var(--panel-bg);border-radius:12px;padding:14px;box-shadow:var(--card-shadow);backdrop-filter:blur(4px);color:var(--text)}
.panel-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.chat-list{max-height:60vh;overflow:auto;padding:6px}
.chat-item{display:flex;gap:12px;align-items:center;padding:10px;border-radius:10px;cursor:pointer}
.chat-item:focus{outline:3px solid var(--focus-ring);outline-offset:3px}
.chat-item:hover{background:linear-gradient(90deg,rgba(42,171,238,0.06),rgba(42,171,238,0.03))}
.avatar{width:44px;height:44px;border-radius:12px;background:linear-gradient(135deg,var(--soft),#dff4ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:#065}
.chat-meta{flex:1}
.chat-name{font-weight:600}
.chat-last{font-size:13px;color:var(--muted-text)}
.hint{position:fixed;background:var(--hint-bg);border-radius:10px;padding:8px 12px;box-shadow:var(--hint-shadow);font-size:13px;color:var(--text);pointer-events:none;opacity:0;transform:translateY(6px);transition:opacity .18s ease,transform .18s ease;z-index:90;max-width:300px;white-space:normal;line-height:1.3}
.hint::after{content:'';position:absolute;width:0;height:0;border-style:solid;pointer-events:none}
.messages{display:flex;flex-direction:column;gap:12px;height:60vh;overflow:auto;padding:16px}
.msg{max-width:70%;padding:10px 14px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.03);cursor:pointer}
.msg.me{align-self:flex-end;background:linear-gradient(180deg,#e8f9ff,#dff5fb)}
.msg.them{align-self:flex-start;background:var(--panel-strong)}
.msg.small{font-size:13px}
.interpretation{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px}
.channel-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:12px}
.post{background:var(--panel-strong);border-radius:12px;padding:12px;box-shadow:var(--card-shadow);display:flex;flex-direction:column;gap:8px;transition:transform .12s ease,box-shadow .12s ease}
.post:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(0,0,0,0.08)}
.post img{width:100%;height:110px;object-fit:cover;border-radius:8px}
.post .meta{font-size:13px;color:var(--muted-text)}
.zen{display:none;align-items:center;justify-content:center;min-height:60vh;text-align:center}
.zen.visible{display:flex}
.reflection{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:14px;padding:60px 12px}
.reflection blockquote{font-size:20px;line-height:1.4;margin:0;color:var(--text);font-weight:600}
.feedback textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:transparent;color:var(--text)}
.feedback .feedback-actions{display:flex;gap:8px;margin-top:8px}
.sources-list{list-style:disc;margin-left:18px}
.progress-wrap{position:fixed;left:0;right:0;top:0;height:6px;z-index:120}
#progressWrap{position:fixed;left:0;right:0;top:0;height:4px;background:transparent;pointer-events:none}
#progressBar{height:4px;background:linear-gradient(90deg,var(--accent-strong),var(--accent));width:0;transition:width .15s linear}
.toc{display:flex;gap:8px;align-items:center}
.toc button{background:transparent;border:none;color:var(--muted-text);cursor:pointer;padding:6px;border-radius:8px}
.toc button[aria-current='true']{color:var(--accent);font-weight:700}
@media (max-width:880px){.mock{grid-template-columns:1fr}.logo{width:48px;height:48px}.intro p{font-size:16px}}
@media (max-width:600px){body{padding:20px 8px}.scene{min-height:auto;padding:20px 12px;margin:16px 0}.intro{padding:40px 12px;gap:12px}.intro h1{font-size:18px}.intro p{font-size:14px}.mock{gap:12px}.panel{padding:12px}.chat-list{max-height:40vh}.messages{height:40vh}.toolbar{gap:6px}.channel-grid{grid-template-columns:1fr;gap:8px}.reflection{padding:40px 12px}.reflection blockquote{font-size:18px}.zen{min-height:50vh}.zen h2{font-size:18px}.zen p{font-size:14px}}
/* accessibility: show focus outlines when keyboard nav is used */
.show-focus :focus{outline:3px solid var(--focus-ring);outline-offset:3px;border-radius:6px}
